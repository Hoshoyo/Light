LoadLibraryA:(filename : ^u8) -> ^void #extern("kernel32.dll");
GetProcAddress:(module : ^void, proc_name : ^u8) -> ^void #extern("kernel32.dll");

main : () -> s32 {
    dll := LoadLibraryA("C:/dev/c/dll_callback/dllcallback.dll\0".data);

    if dll != null {
        many_args := GetProcAddress(dll, "many_args\0".data) -> (s32, s32, s32, s32, s32, s32, s32) -> s32 #extern;
        if many_args -> ^void != null {
            return many_args(1, 2, 3, 4, 5, 6, 7);
        }
    } else {
        return -1;
    }
    return -1;
}
